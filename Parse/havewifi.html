<!DOCTYPE html>  
<html>  
<head>  
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>  
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>  
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
		<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
		<script src="http://www.parsecdn.com/js/parse-1.1.5.min.js"></script>
		<script type="text/javascript"
			src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBVYmtKrniJdpYFLa4-QMXaWYemedvw1bA&sensor=true">
		</script>
<script type="text/javascript">  
	
	var geocoder;
	
	function initialize() {  
		geocoder = new google.maps.Geocoder();  
	}  
  
	function mainFunction() {
	
		var name=document.getElementById("Name").value;
		var cost=(document.getElementById("Cost").value)*1;
		var bandwidth=(document.getElementById("Bandwidth").value)*1;
		var email=(document.getElementById("Email").value);
		var address=(document.getElementById("Address").value);
		var zipcode=(document.getElementById("Zipcode").value);
		/*if(name==""||cost==""||email==""||address==""||zipcode=="")
			{
				alert("you have to input all the required information");
				return;
			}		
		if(!verfifyEmail(email))
		{
			alert("Email address is not right");
			return;
		}*/
	
		Parse.initialize("w2QBbAohqDJLi4kE7tMP5oaca09vw63UgCo8OfMv", "EOfmgHdudoXYhuRtdjN7dpEPMg7CqE03YTzBcZRx");
		var Hotspots = Parse.Object.extend("Hotspots");
		var hotspots=new Hotspots();
		var point;
				
		geocoder.geocode( { 'address': address}, function(results, status) {  
		if (status == google.maps.GeocoderStatus.OK) {
			point = new Parse.GeoPoint({latitude:results[0].geometry.location.lat(),longitude:results[0].geometry.location.lng()});
			x=results[0].geometry.location.lat();
			y=results[0].geometry.location.lng();

		} else {  
			alert("Geocode was not successful for the following reason: " + status);  
		}  
		});  

		hotspots.set("Name",name);
		hotspots.set("Cost",cost);
		hotspots.set("Bandwidth",bandwidth);
		hotspots.set("Address",address);
		hotspots.set("Location",point);

		hotspots.save(null,{
			success: function(hotspots){
				alert("Data stored successfully on Wi-Find");
			},
			error: function(hotspots,error){
				alert("Failed to save information on Wi-Find");
			}
		});
	}  
	
	function verfifyEmail(email)
	{
		var reg = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
		email_Flag = reg.test(email);
		return email_Flag;
	}

</script>  
</head>  
	<body onload="initialize()"> 
		<div data-role="page" data-theme="b" id="page1" data-theme="a" >
			<div data-role="header" data-theme="a" style="height:35px;">
				<h1>Share Wi-Fi</h1>
			</div><!-- /header -->
			
			<div data-role="content" id="contentMain" name="contentMain">	
				<form id="form1">
					<div id="div1" data-role="fieldcontain">
						<label for="Name">Name*</label>		
						<input id="Name" name="Name" type="text" value=""/>
					</div>
					

					<div id="div2" data-role="fieldcontain">
						<label for="Cost" >Cost*</label>		
						<input id="Cost" name="Cost" type="text" />
					</div>
					
					<div id="div1" data-role="fieldcontain">
						<label for="Address">Street Address*</label>		
						<input id="Address" name="Address" type="text" value=""/>
					</div>
					
					<div id="div1" data-role="fieldcontain">
						<label for="Zipcode">Zipcode*</label>		
						<input id="Zipcode" name="Zipcode" type="text" value=""/>
					</div>
					
					<div id="div1" data-role="fieldcontain">
						<label for="Email">Email*</label>		
						<input id="Email" name="Email" type="text" value=""/>
					</div>
					
					<div id="div4" data-role="fieldcontain">
						<label for="Bandwidth">Bandwidth</label>		
						<input id="Bandwidth" name="Bandwidth" type="text" />
					</div>
			    	
					<input type="button" value="Submit" onclick="mainFunction()" data-theme="a"/>  
					
			    </form>
			</div>
			
			<div class="footer" data-role="footer" data-theme="a" >
			&copy; 2012 Wi-Find Alpha.
			</div><!-- /footer -->
		</div>
	</body>
</html> 